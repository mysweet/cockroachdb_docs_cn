# 高可用性

CockroachDB 被设计为能克服软件和硬件故障，从服务器重启到数据中心停电。这是通过通过使用强一致复制以及故障后自动修复达到的，没有其他分布式系统典型的令人迷惑的东西（即，陈旧读）。

## 复制

CockroachDB 为可用性复制你的数据，并使用[Raft 共识算法](https://raft.github.io/)保证副本之间的一致性，这是 [Paxos](http://research.microsoft.com/en-us/um/people/lamport/pubs/paxos-simple.pdf) 的一个流行的替代算法。你可以用多种方式[定义副本的位置](configure-replication-zones.html)，取决于你想克服哪种类型的故障和你的网络拓扑。你可以将副本定位于：

- 一个机架上的不同服务器，以克服服务器故障
- 一个数据中心中不同机架上的不同服务器，以克服电力/网络故障
- 不同数据中心中的不同服务器，以克服大规模的网络和电力故障 

在跨数据中心复制时，我们推荐使用在同一洲的数据中心以保证更好的性能。跨洲和其他高延迟的情况将会在以后被更好的支持。 

## 自动修改

对于短期故障，例如服务器重启，CockroachDB 使用 Raft 无缝地持续运行，只有大多数的副本保存可用。Raft 确保，如果前面的"领导者"失效，一个副本组的新的“领导者”被选出，因此，事务可以继续而且受影响的副本能够在它们回到线上后重新加入它们的组。对于长期的故障，比如服务器/机架长时间的不可用，或者是数据中心停电，CockroachDB 自动从消失的节点再平衡副本，使用未被影响的副本作为源。使用来自闲话网络的容量信息，集群中的新位置被确认，而且消失的副本以分布式的方式使用集群中所有可用的节点和聚合的磁盘和网络带宽被再复制。
